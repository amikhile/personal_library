= simple_form_for [@filter] do |f|
  = display_actions_filter_form f, @filter.id ? filter_url(@filter) :filters_url
  %hr.soften
  = display_errors f

  .filters#filters{value: @filter.id}
    = f.input :name, :label => 'Name'
    = f.input :text, :label => 'Text',:as => :string, :wrapper_html => { :class => "inline_field_wrapper" }
    = f.input :from_date, :required => false, :input_html => { data: {behaviour: "datepicker"}, :class => 'float:left;'}, :as => :string
    = f.input :to_date, :required => false, :input_html => { data: {behaviour: "datepicker"}}, :as => :string
    = f.association :content_types, :collection => @content_types, :label => 'Content Type', :prompt => '-- Please select content type --', :input_html => {:class => 'span5'}
    = f.association :media_types, :collection => @media_types, :label => 'Media Type', :prompt => '-- Please select media type --', :input_html => {:class => 'span5'}
    = f.association :languages, :collection => @languages, :label => 'Language', :prompt => '-- Please select language --', :input_html => {:class => 'span5'}
    %input#selected_catalogs{:name => "selected_catalogs", :type => "hidden", :value => ""}
    #catalogs
  %hr.soften
  = display_actions_filter_form f, @filter.id ? filter_url(@filter) :filters_url

:javascript
  function get_selected_catalogs(button) {
    var checked_ids = [];
    $("#catalogs").jstree("get_checked",null,false).each(function(){
      checked_ids.push(this.id);
    });
    document.getElementById('selected_catalogs').value = checked_ids.join(",");
  }

